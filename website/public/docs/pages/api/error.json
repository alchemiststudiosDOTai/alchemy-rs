{
  "slug": "api/error",
  "title": "Error Handling",
  "summary": "Centralized error types with Result<T> alias and comprehensive error variants",
  "readWhen": [
    "You need to handle API errors, network failures, or validation issues",
    "You want to understand what can go wrong in the Alchemy crate",
    "You need to propagate errors using the ? operator"
  ],
  "content": "\r\n# Error Handling\r\n\r\nCentralized error types for the Alchemy crate. All errors are represented by the `Error` enum, and `Result<T>` is a type alias for `std::result::Result<T, Error>`.\r\n\r\n## Error Type\r\n\r\n```rust\r\n#[derive(Debug, thiserror::Error)]\r\npub enum Error {\r\n    #[error(\"No API key provided for provider: {0}\")]\r\n    NoApiKey(String),\r\n\r\n    #[error(\"HTTP request failed: {0}\")]\r\n    RequestError(#[from] reqwest::Error),\r\n\r\n    #[error(\"API returned error: {status_code} - {message}\")]\r\n    ApiError { status_code: u16, message: String },\r\n\r\n    #[error(\"Stream aborted\")]\r\n    Aborted,\r\n\r\n    #[error(\"Invalid response: {0}\")]\r\n    InvalidResponse(String),\r\n\r\n    #[error(\"Invalid header: {0}\")]\r\n    InvalidHeader(String),\r\n\r\n    #[error(\"Invalid JSON: {0}\")]\r\n    InvalidJson(#[from] serde_json::Error),\r\n\r\n    #[error(\"Model not found: provider={provider}, model_id={model_id}\")]\r\n    ModelNotFound { provider: String, model_id: String },\r\n\r\n    #[error(\"Unknown provider: {0}\")]\r\n    UnknownProvider(String),\r\n\r\n    #[error(\"Unknown API: {0}\")]\r\n    UnknownApi(String),\r\n\r\n    #[error(\"Tool validation failed: {0}\")]\r\n    ToolValidationFailed(String),\r\n\r\n    #[error(\"Tool not found: {0}\")]\r\n    ToolNotFound(String),\r\n\r\n    #[error(\"Context overflow: model context window exceeded\")]\r\n    ContextOverflow,\r\n}\r\n```\r\n\r\n## Result Type\r\n\r\n```rust\r\npub type Result<T> = std::result::Result<T, Error>;\r\n```\r\n\r\n## Error Variants\r\n\r\n| Variant | Description |\r\n|---------|-------------|\r\n| `NoApiKey` | No API key was found for the specified provider (check environment variables) |\r\n| `RequestError` | HTTP request failed (network issues, timeout, etc.) |\r\n| `ApiError` | Provider returned an error response with status code and message |\r\n| `Aborted` | Stream was aborted by the client |\r\n| `InvalidResponse` | Provider returned an unparseable response |\r\n| `InvalidHeader` | Invalid header value in response |\r\n| `InvalidJson` | JSON parsing failed |\r\n| `ModelNotFound` | Model not found in registry |\r\n| `UnknownProvider` | Provider not recognized |\r\n| `UnknownApi` | API type not recognized |\r\n| `ToolValidationFailed` | Tool call arguments failed schema validation |\r\n| `ToolNotFound` | Tool name not found in available tools |\r\n| `ContextOverflow` | Input exceeds model's context window |\r\n\r\n## Usage Example\r\n\r\n```rust\r\nuse alchemy::{Error, Result};\r\n\r\nfn make_request() -> Result<String> {\r\n    // Returns Ok(String) or Err(Error)\r\n    Ok(\"success\".to_string())\r\n}\r\n\r\nmatch make_request() {\r\n    Ok(response) => println!(\"Got: {}\", response),\r\n    Err(Error::NoApiKey(provider)) => {\r\n        eprintln!(\"Set {}_API_KEY environment variable\", provider);\r\n    }\r\n    Err(Error::ContextOverflow) => {\r\n        eprintln!(\"Conversation too long, consider summarizing\");\r\n    }\r\n    Err(e) => eprintln!(\"Error: {}\", e),\r\n}\r\n```\r\n\r\n## Propagation\r\n\r\nUse the `?` operator to propagate errors:\r\n\r\n```rust\r\nuse alchemy::{Error, Result};\r\n\r\nfn fetch_model(model_id: &str) -> Result<&'static AnyModel> {\r\n    let model = get_model(model_id)\r\n        .ok_or_else(|| Error::ModelNotFound {\r\n            provider: \"unknown\".to_string(),\r\n            model_id: model_id.to_string(),\r\n        })?;\r\n    Ok(model)\r\n}\r\n```\r\n",
  "category": "api",
  "order": 999
}